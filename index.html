<meta charset="UTF-8"> <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, viewport-fit=cover"> <meta name="apple-mobile-web-app-capable" content="yes"> <meta name="apple-mobile-web-app-status-bar-style" content="black"> <title>Tennis 1v1</title> <style> body { margin: 0; display: flex; justify-content: center; align-items: center; min-height: 100vh; background: #f0f0f0; font-family: Arial, sans-serif; } #g { text-align: center; } #c { border: 2px solid #333; background: #000; width: 90vw; max-width: 800px; height: 45vw; max-height: 400px; display: block; margin: 0 auto; } #s { font-size: 5vw; margin: 2vw 0; color: #333; } #b, #j, #cp { padding: 3vw 5vw; font-size: 4vw; cursor: pointer; background: #4CAF50; color: #fff; border: none; border-radius: 1vw; margin: 1vw; } #b:hover, #j:hover, #cp:hover { background: #45a049; } #i { font-size: 4vw; padding: 2vw; width: 40vw; border-radius: 1vw; } #st { font-size: 4vw; color: #333; } </style>
Player: 0 | Opponent: 0
Disconnected
<canvas id="c" width="800" height="400"></canvas>
<input id="i" type="text" placeholder="Enter Game ID"> <button id="j">Join Game</button> <button id="b">Create Game</button> <button id="cp" style="display:none">Copy ID</button>
<script> const c = document.getElementById("c"), x = c.getContext("2d"), s = document.getElementById("s"), b = document.getElementById("b"), j = document.getElementById("j"), i = document.getElementById("i"), cp = document.getElementById("cp"), st = document.getElementById("st"), ws = new WebSocket("wss://tennis-game-server.onrender.com"), p = { x: 50, y: 150, w: 10, h: 100 }, o = { x: 740, y: 150, w: 10, h: 100 }, l = { x: 400, y: 200, r: 10, sx: 0, sy: 0 }; let ps = 0, os = 0, g = 0, h = [], id = "", pl = 0; const dpr = window.devicePixelRatio || 1; c.width = 800 * dpr; c.height = 400 * dpr; c.style.width = "90vw"; c.style.height = "45vw"; x.scale(dpr, dpr); ws.onopen = () => { st.textContent = "Connected"; }; ws.onclose = () => { st.textContent = "Disconnected"; g = 0; }; ws.onmessage = e => { const d = JSON.parse(e.data); if (d.t === "id") { id = d.id; i.value = id; cp.style.display = "inline"; st.textContent = "Waiting for opponent"; } else if (d.t === "start") { g = 1; pl = d.p; s.textContent = `Player: ${ps} | Opponent: ${os}`; st.textContent = "Playing"; } else if (d.t === "state") { l.x = d.b.x; l.y = d.b.y; l.sx = d.b.sx; l.sy = d.b.sy; p.y = d.p1.y; o.y = d.p2.y; ps = d.s1; os = d.s2; h = d.sh; s.textContent = `Player: ${ps} | Opponent: ${os}`; } }; c.addEventListener("touchstart", e => e.preventDefault()); c.addEventListener("touchmove", e => { e.preventDefault(); const r = c.getBoundingClientRect(), y = e.touches[0].clientY - r.top - p.h / 2 / dpr, t = y < 0 ? 0 : y > 400 - p.h ? 400 - p.h : y; p.y = t; ws.send(JSON.stringify({ t: "move", y: t })); }); c.addEventListener("touchend", e => { e.preventDefault(); }); c.addEventListener("mousemove", e => { const r = c.getBoundingClientRect(), y = e.clientY - r.top - p.h / 2 / dpr, t = y < 0 ? 0 : y > 400 - p.h ? 400 - p.h : y; p.y = t; ws.send(JSON.stringify({ t: "move", y: t })); }); b.addEventListener("click", () => { ws.send(JSON.stringify({ t: "create" })); }); j.addEventListener("click", () => { if (i.value) ws.send(JSON.stringify({ t: "join", id: i.value })); }); cp.addEventListener("click", () => { navigator.clipboard.writeText(id); alert("Game ID copied!"); }); function dr() { x.fillStyle = "#000"; x.fillRect(0, 0, 800, 400); x.fillStyle = "#fff"; x.fillRect(pl === 1 ? p.x : o.x, pl === 1 ? p.y : o.y, p.w, p.h); x.fillRect(pl === 2 ? p.x : o.x, pl === 2 ? p.y : o.y, o.w, o.h); x.beginPath(); x.arc(l.x, l.y, l.r, 0, Math.PI * 2); x.fill(); x.closePath(); h.forEach(s => { if (s.t === "circle") { x.beginPath(); x.arc(s.x, s.y, s.z, 0, Math.PI * 2); x.fillStyle = "red"; x.fill(); x.closePath(); } else if (s.t === "square") { x.fillStyle = "blue"; x.fillRect(s.x - s.z / 2, s.y - s.z / 2, s.z, s.z); } else { x.beginPath(); x.moveTo(s.x, s.y - s.z / 2); x.lineTo(s.x - s.z / 2, s.y + s.z / 2); x.lineTo(s.x + s.z / 2, s.y + s.z / 2); x.closePath(); x.fillStyle = "green"; x.fill(); } }); x.setLineDash([5, 15]); x.beginPath(); x.moveTo(400, 0); x.lineTo(400, 400); x.strokeStyle = "#fff"; x.stroke(); x.setLineDash([]); } function gl() { if (g) { dr(); requestAnimationFrame(gl); } else { dr(); } } gl(); </script>
